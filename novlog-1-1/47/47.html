
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>[C# 고급문법] #2 Delegate(델리게이트) & 콜백함수(CallBack)</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">[C# 고급문법] #2 Delegate(델리게이트) & 콜백함수(CallBack)</h2>
                                <div class="box-info">
                                    <p class="category">? Archive/C#</p>
                                    <p class="date">2021-06-09 18:35:28</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><figure class="imageblock alignCenter" data-origin-width="313" data-origin-height="319" data-filename="c#.png" width="200" height="204" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" data-origin-width="313" data-origin-height="319" data-filename="c#.png" width="200" height="204" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p style="text-align: center;" data-ke-size="size18"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">[목차]</span></b></p>
<p style="text-align: center;" data-ke-size="size16"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#1. </span></b><span style="font-family: 'Nanum Gothic'; color: #000000;">콜백이란?</span><b><span style="font-family: 'Nanum Gothic'; color: #000000;"><br />#2.1 </span></b><span style="font-family: 'Nanum Gothic'; color: #000000;">델리게이트(Delegate) 선언</span></p>
<p style="text-align: center;" data-ke-size="size16"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2.2 </span></b><span style="font-family: 'Nanum Gothic'; color: #000000;">.Invoke()</span></p>
<p style="text-align: center;" data-ke-size="size16"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2.3 </span></b><span style="font-family: 'Nanum Gothic'; color: #000000;">델리게이트 체인(Delegate Chain)</span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">* 개인적인 공부 기록용으로 작성한 포스팅 이기에 잘못된 내용이 있을 수 있으며, 추가하거나 잘못된 내용이 있다면 지속적으로 수정해 나갈 예정입니다.</span></b></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="font-family: 'Nanum Gothic'; color: #000000;"><b>#1 콜백이란?</b><br /></span></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="background-color: #333333; color: #ffffff;">프로그래머는 함수를 호출할 때 콜(Call)을 하여 호출합니다.</span> 예를 들어, Run() 이라는 함수를 사용하기 위해 콜(Call)을 하여, 함수를 실행해 달라고 요청을 하는 것이지요.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="background-color: #333333; color: #ffffff;">콜백(CallBack)은, 콜의 반대 되는 개념입니다.</span><span style="color: #ffffff;"> </span><span style="background-color: #333333; color: #ffffff;">사장과 비서의 관계</span>와 같다고 할 수 있는데, 비서(Delegate)에게 사장(Function)이 돌아온다면, 내가(프로그래머) 말한 요청사항을 대신 전해달라고 하는 것 이지요. <b>C#은 이러한 콜백함수를 구현하는 Delegate라는 문법을 제공합니다.</b></span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">처음 델리게이트 문법을 공부할 때는 , 그냥 바로 사장(Function)에게 작업을 요청하면 되는데 왜 굳이 번거롭게 비서(Delegate)를 통해 작업을 전달하는지 이해가 가지 않을 수 도 있습니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">하지만 델리게이트는 다양한 방면에서 사용되는 중요한 문법입니다. 예시로 게임의 UI를 델리게이트를 이용해 구현하고는 합니다. 특정 버튼을 클릭하기 전 까지는 함수를 수행하지 않다가, 버튼을 클릭했을 경우 원하는 화면이나 창이 뜨도록 구현하는것이지요.&nbsp;</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style6" />
<h2 data-ke-size="size26"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2.1 델리게이트(Delegate) 선언</span></b></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이제 본격적으로 Delegate (대리자) 의 사용방법에 대해 설명 하도록 하겠습니다. <span style="background-color: #333333; color: #ffffff;">Delegate</span>를 이용하면, <span style="background-color: #333333; color: #ffffff;">함수를 다른 함수로 전달</span> 할 수 있습니다. 델리게이트의 기본적인 사용 방법은 다음과 같습니다.</span></p>
<pre id="code_1623227831396" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>[기본형] delegate 반환형 이름 (파라미터)</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">메서드의 정의와 비슷하게 생기지 않았나요? 이렇게 delegate를 함수와 비슷하게 선언하도록 한 것은, 본연의 의미 (메서드를 전달하는 것)을 직관적으로 표현하기 위함 이라고 할 수 있습니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">Delegate의 기본형에서 중요한 것은 , <span style="background-color: #333333; color: #ffffff;">반환형</span>과 <span style="background-color: #333333; color: #ffffff;">파라미터(입력)</span> 입니다. <span style="background-color: #333333; color: #ffffff;">반환형과 파라미터가 임의의 메서드와 일치한다면, 그 메서드는 해당하는 델리게이트에서 사용이 가능</span>합니다. </span><span style="font-family: 'Nanum Gothic'; color: #000000;">아래는 Delegate를 사용한 예시 코드입니다.</span></p>
<pre id="code_1623229611963" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>using System;

namespace Delegate_Example
{
    class Program
    {
        delegate int MyDelegate();

        static void ButtonPressed(MyDelegate clickedFunction)
        {
            clickedFunction();
        }

        static int TestDelegate()
        {
            Console.WriteLine("Hello World");
            return 0;
        }

        static void Main(string[] args)
        {
            ButtonPressed(TestDelegate);
        }
    }
}</code></pre>
<pre id="code_1623229930665" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>[출력결과] Hello World</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">반환형이 int형이고, 입력값이 void는 MyDelegate 델리게이트를 선업합니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">다음으로, ButtonPressed 라는, MyDelegate 델리게이트 객체를 파라미터로 받는 메서드를 선언합니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">Main() 함수 부에서 ButtonPressed 함수에 "Hello World"를 출력하는 TestDelegate 함수를 델리게이트 형식으로 전달합니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">마지막으로, ButtonPressed 함수가 실행되면서, 전달한 TestDelegate함수를 같이 실행시킵니다.</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style6" />
<h2 data-ke-size="size26"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2.2 .Invoke()</span></b></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">ButtonPressed 함수 내부에서, 전달받은 함수 TestDelegate를 호출할 때 clickedFunction() 형태로 호출했습니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">그런데, <span style="background-color: #333333; color: #ffffff;">.Invoke() 함수</span>를 이용해서, 다음과 같은 형태로 함수를 호출하는 것 또한 가능합니다.</span></p>
<pre id="code_1623229913155" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>using System;

namespace Delegate_Example
{
    class Program
    {
        delegate int MyDelegate();

        static void ButtonPressed(MyDelegate clickedFunction)
        {
            clickedFunction.Invoke();
        }

        static int TestDelegate()
        {
            Console.WriteLine("Hello World");
            return 0;
        }

        static void Main(string[] args)
        {
            ButtonPressed(TestDelegate);
        }
    }
}</code></pre>
<pre id="code_1623229937979" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>[출력결과] Hello World</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">출력결과는 동일합니다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">입력할 파라미터가 존재하는 경우 Invoke() 메서드의 괄호 안에 입력값을 넣어 줍니다. 보통은 그냥 메서드 이름으로 호출 하기는 하는데 코드를 이해할 수는 있어야 하니 .Invoke() 방식을 사용하는 프로그래머도 존재하기에, 숙지해 두도록 합시다.</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style6" />
<h2 data-ke-size="size26"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2.3 델리게이트 체인(Delegate Chain)</span></b></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="background-color: #333333; color: #ffffff;">Delegate.Combine() 메소드</span>를 이용하면, <span style="background-color: #333333; color: #ffffff;">여러개의 메서드를 묶는 것이 가능</span>합니다. 아래는 <span style="background-color: #f6e199;">Delegate.Combine()을 이용해 plus, minus, divide 함수를 묶어서 출력한 예시</span>입니다.</span></p>
<pre id="code_1623230916224" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>using System;

namespace Delegate_Example
{
    class Program
    {
        delegate void MyDelegate(int a, int b);

        static void plus(int a, int b)
        {
            Console.WriteLine("{0} + {1} = {2}", a, b, a + b);
        }

        static void minus(int a, int b)
        {
            Console.WriteLine("{0} - {1} = {2}", a, b, a - b);
        }

        static void divide(int a, int b)
        {
            Console.WriteLine("{0} / {1} = {2}", a, b, a / b);
        }

        static void Main(string[] args)
        {
            MyDelegate d = (MyDelegate)Delegate.Combine(new MyDelegate(plus), new MyDelegate(minus), new MyDelegate(divide));
            d(10, 2);
        }
    }
}</code></pre>
<pre id="code_1623231469837" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>[출력결과]
10 + 2 = 12
10 - 2 = 8
10 / 2 = 5</code></pre>
                        </div>
                        <br/>
                        <div class="tags">
                            #delegate #c# #객체지향 #델리게이트 #Invoke() #C#문법 #델리게이트체인 #델리게이트사용이유 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
