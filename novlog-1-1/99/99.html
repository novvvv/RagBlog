
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>[Git] #6 깃 버전 관리 VOL4 - 작업 내용 되돌리기 (checkout , reset , revert)</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">[Git] #6 깃 버전 관리 VOL4 - 작업 내용 되돌리기 (checkout , reset , revert)</h2>
                                <div class="box-info">
                                    <p class="category">? Archive/...2022</p>
                                    <p class="date">2021-07-28 11:17:36</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><figure class="imageblock alignLeft" srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtUAyj%2FbtraqrIIS2q%2FhFK8k1eGteC38pQCx5ifW0%2Fimg.png" width="245" data-origin-width="389" data-origin-height="175" data-filename="깃.png" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" srcset="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FtUAyj%2FbtraqrIIS2q%2FhFK8k1eGteC38pQCx5ifW0%2Fimg.png" width="245" data-origin-width="389" data-origin-height="175" data-filename="깃.png" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="color: #000000;"><b>* 다음 포스팅은 깃(Git)의 사용방법에 대하여 정리한 것으로, 개인적인 공부 기록용으로 작성한 글 이기에 잘못된 내용을 포함하고 있을 수 있습니다.</b></span></p>
<p data-ke-size="size16"><span style="color: #000000;"><b>* Window 운영체제를 기준으로 작성했습니다.</b></span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size18"><span style="font-family: 'Nanum Gothic'; color: #ffffff; background-color: #333333;">[목차]</span></p>
<p data-ke-size="size18"><span style="font-family: 'Nanum Gothic'; color: #000000;">#1 수정한 파일 되돌리기 : <span style="color: #006dd7;">git checkout -- 파일이름</span></span></p>
<p data-ke-size="size18"><span style="font-family: 'Nanum Gothic'; color: #000000;">#2 스테이징 되돌리기 :<span style="color: #006dd7;"> git reset HEAD 파일이름</span></span></p>
<p data-ke-size="size18"><span style="font-family: 'Nanum Gothic'; color: #000000;">#3 커밋 되돌리기 : <span style="color: #006dd7;">git reset HEAD^ , git reset --hard 커밋 해시 , git revert</span></span></p>
<p data-ke-size="size16"><span style="color: #000000; font-family: 'Nanum Gothic';">#3.1 최신 커밋 취소하기 : <span style="color: #006dd7;">git reset HEAD^</span></span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">#3.2 특정한 커밋으로 되돌리기 :<span style="color: #006dd7;"> git reset --hard 커밋 해시</span></span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">#3.3 삭제하지 않고 커밋 되돌리기 :<span style="color: #006dd7;"> git revert 커밋해시</span></span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="font-family: 'Noto Serif KR'; color: #000000;">#1 수정한 파일 되돌리기 : git checkout -- 파일이름</span></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">작업 트리에 존재하는 파일의 수정한 내용을 checkout 명령어를 사용하면 손쉽게 취소할 수 있다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">우선, text1.txt 파일을 생성해 주고 "one" 을 입력했다. 그리고 스테이징 &amp; 커밋을 수행했다. (깃이 text1.txt 파일을 추적하도록 하기 위해서는 먼저 저장소에 저장하여야 하기 때문이다.)</span></p>
<pre id="code_1627436647052" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ vim text1.txt // "one" 입력
$ git add text1.txt
$ git commit
$ cat text1.txt // 내용 확인</code></pre>
<p><figure class="imageblock alignLeft" data-origin-width="774" data-origin-height="323" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png" data-origin-width="774" data-origin-height="323" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">vim 편집기를 이용해 text1.txt 파일의 내용을 "one"에서 "1"로 변경한다.</span></p>
<pre id="code_1627436714518" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ vim text1.txt // "one" -&gt; "1"</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">다음으로, <span style="background-color: #333333; color: #ffffff;">"git checkout -- 파일이름"</span> 명령어를 입력한다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="494" data-origin-height="135" width="436" height="120" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_2.png" data-origin-width="494" data-origin-height="135" width="436" height="120" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">cat 명령으로 text1.txt 파일의 내용을 확인해 보니 다시 원래 내용으로 돌아갔다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이처럼, git checkout -- 명령어를 사용하면 수정한 파일의 내용을 원래 대로 복원할 수 있다. <span style="color: #006dd7;">(* 단, checkout으로 되돌린 내용은 다시 복구할 수 없으니 사용에 유의해야 한다.&nbsp;</span></span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="font-family: 'Noto Serif KR'; color: #000000;">#2 스테이징 되돌리기 : git reset HEAD 파일이름</span></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">스테이징을 취소하는 명령에 대해서 알아 보도록 하자.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">vim 편집기로 text1.txt 파일의 내용을 "1"로 변경하고, add 명령으로 스테이징을 수행하고 상태를 확인한다.</span></p>
<pre id="code_1627437084608" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ vim text1.txt // "one" -&gt; "1"
$ git add text1.txt // 스테이징
$ git status // 상태확인</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="color: #006dd7;">"Changes to be commited" 즉, staged 상태임을 확인</span>할 수 있다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="569" data-origin-height="253" width="488" height="217" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_3.png" data-origin-width="569" data-origin-height="253" width="488" height="217" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">다음 명령을 입력하고 다시 상태를 확인해 보자.</p>
<pre id="code_1627437190110" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ git reset HEAD text1.txt // 스테이징 취소
$ git status // 상태확인</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="color: #000000;">스테이징이 취소되었다는 메시지 <span style="color: #006dd7;">"Unstaged changes after reset"</span> 가 출력되고, 상태를 확인해 보니 다시 <span style="color: #006dd7;">작업트리로 돌아 갔음</span>을 확인할 수 있다.</span></span></p>
<p><figure class="imageblock alignLeft" data-origin-width="788" data-origin-height="251" width="684" height="218" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_4.png" data-origin-width="788" data-origin-height="251" width="684" height="218" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이처럼 <span style="background-color: #333333; color: #ffffff;">"git reset HEAD 파일이름"</span> 명령을 사용하면 <span style="color: #006dd7;">스테이징을 취소</span>할 수 있다.</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="font-family: 'Noto Serif KR'; color: #000000;">#3 커밋 되돌리기 : git reset HEAD^ , git reset --hard 커밋 해시 , git revert</span></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">다음으로 커밋을 되돌리는 방법에 대해서 알아보자. 우선, 테스트를 위해 버전 4개를 만들어 주었다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="710" data-origin-height="515" width="571" height="415" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_5.png" data-origin-width="710" data-origin-height="515" width="571" height="415" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<h3 data-ke-size="size23"><span style="font-family: 'Noto Serif KR'; color: #000000; background-color: #f6e199;">#3.1 최신 커밋 취소하기 : git reset HEAD^</span></h3>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="color: #006dd7;">가장 마지막으로 한 커밋을 취소</span>하는 명령어는 <span style="background-color: #333333; color: #ffffff;">"git reset HEAD^"</span> 이다. 다음 명령을 실행하고 로그를 출력해 보자.</span></p>
<pre id="code_1627437618652" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ git reset HEAD^
$ git log // 버전 로그 출력</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic';">가장 최신 버전 하나가 삭제되었다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="715" data-origin-height="494" width="584" height="403" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_6.png" data-origin-width="715" data-origin-height="494" width="584" height="403" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<h3 data-ke-size="size23"><span style="font-family: 'Noto Serif KR'; color: #000000; background-color: #f6e199;">3.2 특정한 커밋으로 되돌리기 : git reset --hard 커밋 해시</span></h3>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="color: #006dd7;">지정한 커밋으로 되돌리고, 그 이후의 버전을 모두 삭제하는 명령어</span>는 <span style="background-color: #333333; color: #ffffff;">git reset --hard 커밋 해시</span>이다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">여기서 <span style="background-color: #333333; color: #ffffff;">"커밋 해시"</span>란, <span style="color: #006dd7;">git log 명령어로 버전을 출력하면 보이는 commit 옆에 보이는 긴 문자열</span>인데 , <span style="color: #006dd7;">커밋을 구분해 주는 역할</span>을 한다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">되돌리고자 하는 버전의 커밋해시를 미리 복사해 두어야 한다. 필자는 2번째 버전으로 되돌릴 것이니, 2번째 버전의 커밋 해시를 복사해 두었다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="712" data-origin-height="350" width="604" height="297" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_7.png" data-origin-width="712" data-origin-height="350" width="604" height="297" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<pre id="code_1627437925470" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ git reset --hard d29d6731e1e802aa97a814ba3718a13dcd4c0bb1(복사한 커밋 해시)</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">2번째 버전으로 되돌리고, 그 이후의 버전 (버전 3) 는 삭제 되었다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="718" data-origin-height="350" width="632" height="308" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_8.png" data-origin-width="718" data-origin-height="350" width="632" height="308" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<h3 data-ke-size="size23"><span style="font-family: 'Noto Serif KR'; color: #000000; background-color: #f6e199;">#3.3 삭제하지 않고 커밋 되돌리기 : git revert 커밋해시</span></h3>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">되돌리고자 하는 <span style="color: #006dd7;">버전 이후의 버전들을 삭제하지 않고 되돌리기</span> 위해서는 reset 명령이 아닌 <span style="background-color: #333333; color: #ffffff;">revert 명령</span>이 필요하다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;"><span style="color: #006dd7;">단, revert 명령은 reset 명령과 달리 취소하고자 하는 버전의 커밋 해시를 지정해야 한다</span>. 필자는 2번째 버전을 취소할 에정이니, 2번째 버전의 커밋 해시를 복사해 두었다.</span></p>
<pre id="code_1627438245170" class="c++ arduino" data-ke-language="c++" data-ke-type="codeblock"><code>$ git revert 복사한 커밋 해시
$ git log</code></pre>
<p><figure class="imageblock alignLeft" data-origin-width="728" data-origin-height="538" width="689" height="509" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_9.png" data-origin-width="728" data-origin-height="538" width="689" height="509" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">버전2를 revert한 새로운 커밋이 생성되었다. 버전2를 삭제하는 대신 버전2에서 변경한 이력을 취소한 새로운 버전을 생성한 것이다.</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
                        </div>
                        <br/>
                        <div class="tags">
                            #깃 #깃허브사용법 #커밋되돌리기 #깃사용법 #스테이징취소 #커밋취소 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
