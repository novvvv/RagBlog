
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>[C++] STL List erase member function 사용 시 주의점</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">[C++] STL List erase member function 사용 시 주의점</h2>
                                <div class="box-info">
                                    <p class="category">? Archive/C&C++</p>
                                    <p class="date">2022-08-18 20:42:22</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p style="text-align: center;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">* 다음 포스팅은 <b><span style="color: #1a5490;">STL List Container의 erase 멤버 함수를 사용 시 발생할 수 있는 오류</span></b>에 대해 다룹니다.</span></p>
<p style="text-align: center;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">* 개인적인 공부 내용을 기록하는 용도로 작성한 글 이기에 <span style="background-color: #dddddd;">잘못된 내용을 포함하고 있을 수 있습니다.</span></span></p>
<p style="text-align: center;" data-ke-size="size16">&nbsp;</p>
<p style="text-align: center;" data-ke-size="size18"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">Related</span></b></p>
<p style="text-align: center;" data-ke-size="size16"><span style="color: #1a5490;"><a style="color: #1a5490;" href="https://novlog.tistory.com/261" target="_blank" rel="noopener"><span style="background-color: #fafafa; font-family: 'Nanum Gothic';">&rarr; STL List Container 사용 방법 정리</span></a></span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<p style="text-align: center;" data-ke-size="size18"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">Content</span></b></p>
<p style="text-align: center;" data-ke-size="size18"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#1 Vector erase member function</span></b></p>
<p style="text-align: center;" data-ke-size="size18"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2 List erase member function</span></b></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 style="text-align: left;" data-ke-size="size26"><span style="color: #1a5490;"><b><span style="font-family: 'Nanum Gothic';">#1 Vector erase member functon&nbsp;</span></b></span></h2>
<p style="text-align: left;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">STL 대부분의 Container는 <b>지정된 iterator 위치의 원소를 삭제</b>하는 <span style="color: #1a5490;"><b>erase 멤버 함수</b></span>를 제공합니다.</span></p>
<p style="text-align: left;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이는 list 뿐 만 아니라 vector container 또한 erase 멤버 함수를 포함하고 있습니다.</span></p>
<p style="text-align: left;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">다음은 <u><b>1, 2, 3, 4, 5 를 원소로 가지는 int형 vector 에서 iterator로 원소 1을 가리키게 한 뒤, erase 멤버 함수를 사용해 제거</b></u>한 예시입니다.</span></p>
<pre id="code_1660749552288" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>#include &lt;iostream&gt;
#include &lt;vector&gt;
using namespace std;
int main(){
	vector&lt;int&gt; vec {1, 2, 3, 4, 5};
	cout &lt;&lt; "Before - ";
	for(const auto&amp; i : vec){
		cout &lt;&lt; i &lt;&lt; " ";
	}
	cout &lt;&lt; '\n';
	
	// iterator를 사용해 vector의 첫 번째 원소인 1을 가리키게 합니다.
	vector&lt;int&gt;::iterator it = vec.begin();
	cout &lt;&lt; "It &rarr; " &lt;&lt; *it &lt;&lt; '\n';
	// erase member function을 사용해 iterator it이 가리키는 원소 1을 제거합니다.
	vec.erase(it);
	cout &lt;&lt; "After - ";
	for(const auto&amp; i : vec){
		cout &lt;&lt; i &lt;&lt; " ";
	}
	cout &lt;&lt; '\n';
	return 0;
}</code></pre>
<pre id="code_1660750106122" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>[Result]
Before - 1 2 3 4 5
It &rarr; 1
After - 2 3 4 5</code></pre>
<p><figure class="imageblock alignLeft" >
    <span data-lightbox="lightbox">
        <img src="./img/img.png"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">여기서 의문이 하나 생깁니다. 그렇다면 vector의 첫 번째 원소 1을 가리키고 있던 iterator는 현재 어떤 위치를 가리키게 될까요?</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">위에서 제시한 예시 코드에서 다음 한 줄을 추가해 현재 iterator가 가리키고 있는 값을 출력해 보도록 하겠습니다.</span></p>
<pre id="code_1660750250399" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>cout &lt;&lt; "It &rarr; " &lt;&lt; *it &lt;&lt; '\n';</code></pre>
<pre id="code_1660750267438" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>[Result]
Before - 1 2 3 4 5
It &rarr; 1
After - 2 3 4 5
It &rarr; 2</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">iterator는 자동으로 vector의 다음 원소를 가리키게 됩니다.</span></p>
<p><figure class="imageblock alignLeft" >
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="color: #1a5490;"><b><span style="font-family: 'Nanum Gothic';">#2 List erase memeber function</span></b></span></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이번에는 <span style="background-color: #333333; color: #dddddd;">List Container</span>에서 <b>erase member function</b>을 사용해 보도록 하겠습니다.</span></p>
<pre id="code_1660821923932" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>#include &lt;iostream&gt;
#include &lt;list&gt;
using namespace std;
int main() {
  list&lt;int&gt; myList{1, 2, 3, 4, 5};
  cout &lt;&lt; "Before - ";
  for (const auto &amp;i : myList) {
    cout &lt;&lt; i &lt;&lt; " ";
  }
  cout &lt;&lt; '\n';

  // iterator를 사용해 list의 첫 번째 원소인 1을 가리키게 합니다.
  list&lt;int&gt;::iterator it = myList.begin();
  cout &lt;&lt; "It &rarr; " &lt;&lt; *it &lt;&lt; '\n';
  // erase member function을 사용해 iterator it이 가리키는 원소 1을 제거합니다.
  myList.erase(it);
  cout &lt;&lt; "After - ";
  for (const auto &amp;i : myList) {
    cout &lt;&lt; i &lt;&lt; " ";
  }
  cout &lt;&lt; '\n';

  cout &lt;&lt; "It &rarr; " &lt;&lt; *it &lt;&lt; '\n';
  return 0;
}</code></pre>
<pre id="code_1660821953418" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>[Result]
Before - 1 2 3 4 5 
It &rarr; 1
After - 2 3 4 5 
It &rarr; 1</code></pre>
<p><figure class="imageblock alignLeft" >
    <span data-lightbox="lightbox">
        <img src="./img/img_2.png"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">vector와 달리 list의 iterator가 가리키는 값은 전혀 엉뚱한 값이 출력됩니다. </span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">iterator가 이미 지워진 원소인 1의 주소를 참조하고 있는 것을 확인할 수 있습니다.</span></p>
<p><figure class="imageblock alignLeft" >
    <span data-lightbox="lightbox">
        <img src="./img/img_3.png"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">C++ STL list의 <a href="https://en.cppreference.com/w/cpp/container/list/erase" target="_blank" rel="noopener">공식 문서</a>의 Return Value 부분을 보면 다음과 같이 설명합니다.</span></p>
<p data-ke-size="size16"><span style="color: #1a5490;"><b><span style="background-color: #ffffff; font-family: 'Nanum Gothic';">Iterator following the last removed element.</span></b></span></p>
<p data-ke-size="size16"><b><span style="background-color: #ffffff; color: #000000; font-family: 'Nanum Gothic';">- 마지막으로 제거된 원소의 다음 원소를 리턴합니다.</span></b></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="background-color: #ffffff; color: #000000; font-family: 'Nanum Gothic';">즉, list에서 erase 함수를 사용할 시 vector와 달리 이터레이터로 다음과 같이 리턴값을 받아 주어야 합니다.</span></p>
<pre id="code_1660822226532" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>  // erase member function을 사용해 iterator it이 가리키는 원소 1을 제거합니다.
  it = myList.erase(it);</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이제 다시 코드를 실행해 보도록 하겠습니다.</span></p>
<pre id="code_1660822319530" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>#include &lt;iostream&gt;
#include &lt;list&gt;
using namespace std;
int main(){
	list&lt;int&gt; myList {1, 2, 3, 4, 5};
	cout &lt;&lt; "Before - ";
	for(const auto&amp; i : myList){
		cout &lt;&lt; i &lt;&lt; " ";
	}
	cout &lt;&lt; '\n';
	
	// iterator를 사용해 list의 첫 번째 원소인 1을 가리키게 합니다.
	list&lt;int&gt;::iterator it = myList.begin();
	cout &lt;&lt; "It &rarr; " &lt;&lt; *it &lt;&lt; '\n';
	// erase member function을 사용해 iterator it이 가리키는 원소 1을 제거합니다.
	it = myList.erase(it);
	cout &lt;&lt; "After - ";
	for(const auto&amp; i : myList){
		cout &lt;&lt; i &lt;&lt; " ";
	}
	cout &lt;&lt; '\n';
	
	// 추가된 코드
	cout &lt;&lt; "It &rarr; " &lt;&lt; *it &lt;&lt; '\n';
	return 0;
}</code></pre>
<pre id="code_1660822370894" class="cpp" data-ke-language="cpp" data-ke-type="codeblock"><code>[Result]
Before - 1 2 3 4 5
It &rarr; 1
After - 2 3 4 5
It &rarr; 2</code></pre>
<p><figure class="imageblock alignLeft" >
    <span data-lightbox="lightbox">
        <img src="./img/img_4.png"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이터레이터가 삭제된 원소 1이 아닌 2를 가리키고 있습니다.</span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이처럼 <span style="background-color: #333333; color: #dddddd;">list container에서 erase 함수를 사용할 경우 반드시 iterator로 리턴값을 받아 주어야 합니다.</span></span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">그렇지 않으면 iterator가 엉뚱한 값을 가리키게 되어 segmentation fault 와 같은 에러를 발생시킬 수 있습니다.</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<p style="text-align: center;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">이번 포스팅 에서는 list container 에서 erase 함수를 사용 시 유의해야할 점에 대해서 살펴 보았습니다.</span></p>
<p style="text-align: center;" data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">도움이 되셨다면 하단의 <span style="background-color: #333333; color: #dddddd;">공감</span> 한 번씩 부탁드립니다!</span></p>
                        </div>
                        <br/>
                        <div class="tags">
                            #C++ #STL #list #erase #segmentatiion fault 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
