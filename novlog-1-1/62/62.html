
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>[Unity] 오브젝트 회전 Rotation & Quaternion &  eulerAngles (캐릭터 좌우 반전 코드)</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">[Unity] 오브젝트 회전 Rotation & Quaternion &  eulerAngles (캐릭터 좌우 반전 코드)</h2>
                                <div class="box-info">
                                    <p class="category">? Archive/GameDevelop</p>
                                    <p class="date">2021-06-23 15:17:20</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><figure class="imageblock alignLeft" data-origin-width="901" data-origin-height="901" data-filename="unitylogo.png" width="200" height="200" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" data-origin-width="901" data-origin-height="901" data-filename="unitylogo.png" width="200" height="200" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><b><span style="color: #000000; font-family: 'Nanum Gothic';">#Quarternion &amp; eluerAngles</span></b></p>
<p data-ke-size="size16"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#transform.rotation</span></b></p>
<p data-ke-size="size16"><b><span style="font-family: 'Nanum Gothic'; color: #000000;">#2D 캐릭터 좌우반전 예제</span></b><span style="font-family: 'Nanum Gothic'; color: #000000;"></span></p>
<p data-ke-size="size16"><span style="background-color: #dddddd; color: #000000; font-family: 'Nanum Gothic';">*개인적인 유니티 공부 내용을 기록하는 용도로 작성된 글 이기에, 잘못된 내용이 있을 수 있습니다.</span></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><b><span style="font-family: 'Noto Sans Demilight', 'Noto Sans KR'; color: #000000;">#Quarternion &amp; eluerAngles</span></b></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">오브젝트 회전에 대해 이야기 하기 전에, eluerAngles 과 Quarternion에 대한 지식이 필요하다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">eluerAngles 이란, x,y,z축을 사용해서 오브젝트를 0~360 도 회전 시키는 기본적인 좌표계이다. 그러나, eluerAngles 에는 Gimbal Lock 이라는 문제점이 존재한다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000; background-color: #f6e199;">*관련영상</span></p>
<p data-ke-size="size16"><a href="https://youtu.be/zc8b2Jo7mno" target="_blank" rel="noopener">https://youtu.be/zc8b2Jo7mno</a></p>
<figure data-ke-type="video" data-ke-style="alignCenter" data-video-host="youtube" data-video-url="https://www.youtube.com/watch?v=zc8b2Jo7mno&amp;feature=youtu.be" data-video-thumbnail="https://scrap.kakaocdn.net/dn/q2LVK/hyKFi1zww3/Ugki9Kx5hsuxOv3Lz6ulck/img.jpg?width=480&amp;height=360&amp;face=0_0_480_360" data-video-width="480" data-video-height="360" data-video-origin-width="480" data-video-origin-height="360" data-ke-mobilestyle="widthContent"><iframe src="https://www.youtube.com/embed/zc8b2Jo7mno" width="480" height="360" frameborder="0" allowfullscreen="true"></iframe>
<figcaption></figcaption>
</figure>
<p data-ke-size="size16">따라서, x,y,z 축에 가상의 축을 하나 더 추가한 사원수라는 개념의 Quarternion 이라는 것을 사용해야 한다.</p>
<p data-ke-size="size16">Quaternion은 사용하기에 어려운 개념이지만, 유니티는 Quarternion 관련 함수를 제공하기에, 유니티 프로그래머는 유니티에서 제공하는 함수를 사용하기만 하면 된다.</p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="font-family: 'Noto Sans Demilight', 'Noto Sans KR';"><b><span style="color: #000000;">#transform.rotation</span></b></span></h2>
<p><figure class="imageblock alignLeft" data-origin-width="426" data-origin-height="144" width="367" height="124" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png" data-origin-width="426" data-origin-height="144" width="367" height="124" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">Scene에 존재하는 모든 오브젝트에는 위치를 나타내기 위한 Transform 컴퍼넌트가 존재한다. Transform 컴퍼넌트의 Rotation은 물체의 회전각도를 담당하는데, 이 Rotation이 앞서 설명한 Quaternion을 기반으로 한다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">따라서 다음과 같이 Position 을 초기화 하는 것 처럼 Vector3 객체를 넘겨주면 에러가 발생한다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="456" data-origin-height="42" width="424" height="39" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_2.png" data-origin-width="456" data-origin-height="42" width="424" height="39" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">Rotation 값을 초기화 하기 위해서는, transform.rotation에 아래와 같이 Quarternion의 Euler 각을 넘겨 주어야 한다.</span></p>
<p><figure class="imageblock alignLeft" data-origin-width="519" data-origin-height="37" width="505" height="36" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_3.png" data-origin-width="519" data-origin-height="37" width="505" height="36" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">혹은, 그냥 바로 transform에 eluerAngles를 바로 넘겨주는 방식도 가능하다.</p>
<p><figure class="imageblock alignLeft" data-origin-width="510" data-origin-height="29" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_4.png" data-origin-width="510" data-origin-height="29" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<hr contenteditable="false" data-ke-type="horizontalRule" data-ke-style="style5" />
<h2 data-ke-size="size26"><span style="font-family: 'Noto Sans Demilight', 'Noto Sans KR';"><b><span style="color: #000000;">#2D 캐릭터 좌우반전 예제</span></b></span></h2>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">다음은 eulerAngles를 이용해 플레이어를 좌우 반전 시키는 예제이다.</span></p>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">키 입력은 GextAxis("") 로 받았고, rigid.velocity 를 이용해서 플레이어 이동을 구현하였다. 캐릭터에는 RigidBody2D 중력이 설정되어 있으며, 지면과 플레이어의 충돌은 Collider2D로 충돌을 감지한다.</span></p>
<pre id="code_1624428433752" class="cs" data-ke-language="cs" data-ke-type="codeblock"><code>    Rigidbody2D rigid;
    [SerializeField] private float speed;
    [SerializeField] Transform pos;

    void Awake()
    {
        rigid = GetComponent&lt;Rigidbody2D&gt;();
    }

    void FixedUpdate()
    {
        /* rigid.Velocity */
        float pos = Input.GetAxis("Horizontal");
        rigid.velocity = new Vector2(pos * speed, rigid.velocity.y);

        // 좌우반전
        if (pos &lt; 0)
            transform.eulerAngles = new Vector3(0, 0, 0);
        else if (pos &gt; 0)
            transform.eulerAngles = new Vector3(0, 180, 0);

    }</code></pre>
<p data-ke-size="size16"><span style="font-family: 'Nanum Gothic'; color: #000000;">캐릭터가 좌측 우측키를 누를 때 마다 Rotation값이 변경된다. <b>(단, 아래 예제는 초기 플레이어 오브젝트 Rotation 값이 180도로 설정되어 있기에 각 상황에 맞게 if , else if 구문의 부등호만 수정해 주면 된다.)&nbsp;</b></span></p>
<p><figure class="imageblock alignLeft" data-origin-width="700" data-origin-height="392" data-filename="좌우반전구현.gif" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img.gif" data-origin-width="700" data-origin-height="392" data-filename="좌우반전구현.gif" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
                        </div>
                        <br/>
                        <div class="tags">
                            #로테이션 #쿼터니언 #유니티2D #캐릭터회전 #오일러앵글 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
